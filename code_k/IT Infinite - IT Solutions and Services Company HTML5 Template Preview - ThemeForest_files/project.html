<!DOCTYPE html>
<html lang="zxx" class="lenis" style="--scrollbar-width: 4px">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta
            name="keywords"
            content="Hexa Terminal, Tech Projects, Innovation, Technology Solutions"
        />
        <meta
            name="description"
            content="Explore detailed insights into Hexa Terminal's cutting-edge technology projects and solutions."
        />
        <meta name="author" content="Hexa Terminal" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <title>Hexa Terminal - Innovative Project Insights</title>

        <!-- Favicon -->
        <link rel="shortcut icon" href="assets/images/favicon.ico" />

        <!-- CSS Files -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
            rel="stylesheet"
        />
        <link href="assets/style/css2.css" rel="stylesheet" />
        <link href="assets/style/bootstrap.min.css" rel="stylesheet" />
        <link href="assets/style/magnific-popup.css" rel="stylesheet" />
        <link href="assets/style/owl.carousel.min.css" rel="stylesheet" />
        <link href="assets/style/swiper.min.css" rel="stylesheet" />
        <link href="assets/style/style.css" rel="stylesheet" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&family=Jost:wght@400;500;600;700&family=Russo+One&display=swap"
            rel="stylesheet"
        />

        <style>
            body {
                font-family: "Cairo", "Jost", sans-serif;
                background: linear-gradient(135deg, #1c1c2e 0%, #2a2a4a 100%);
                color: #d9d9e3;
                line-height: 1.7;
                margin: 0;
                padding: 0;
            }
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: "Russo One", "Cairo", sans-serif;
                color: #ffffff;
                margin-bottom: 15px;
            }
            .english-lang {
                font-family: "Jost", sans-serif;
                direction: ltr;
            }
            .arabic-lang {
                font-family: "Cairo", sans-serif;
                direction: rtl;
            }

            .project-hero {
                background: url("assets/images/tech-pattern.png") repeat center;
                position: relative;
                padding: 110px 0;
                overflow: hidden;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            .project-hero::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.6);
                z-index: 1;
            }
            .project-hero .container {
                position: relative;
                z-index: 2;
                text-align: center;
            }
            .project-hero .sub-title {
                font-size: 1.2rem;
                color: #00c4cc;
                text-transform: uppercase;
                letter-spacing: 2.5px;
                font-weight: 500;
                animation: fadeIn 1.2s ease-out;
            }
            .project-hero .title {
                font-size: 3.5rem;
                font-weight: 700;
                margin: 10px 0 20px;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                animation: fadeInUp 1.2s ease-out 0.5s backwards;
            }

            .project-content {
                padding: 100px 0;
                background: #1c1c2e;
            }
            .image-gallery {
                margin-bottom: 40px;
                overflow-x: auto;
                white-space: nowrap;
                padding: 15px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            }
            .image-gallery::-webkit-scrollbar {
                height: 6px;
            }
            .image-gallery::-webkit-scrollbar-track {
                background: #2a2a4a;
                border-radius: 3px;
            }
            .image-gallery::-webkit-scrollbar-thumb {
                background: #00c4cc;
                border-radius: 3px;
            }
            .image-gallery img {
                gap: 20px;
                width: 70%;
                height: 70%;
                object-fit: cover;
                border-radius: 12px;
                margin-right: 20px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                transition: transform 0.4s ease, box-shadow 0.4s ease;
            }
            .image-gallery img:hover {
                transform: scale(1.03);
                box-shadow: 0 6px 18px rgba(0, 196, 204, 0.4);
            }
            .project-card {
                background: #252545;
                border-radius: 15px;
                padding: 25px;
                margin-bottom: 25px;
                transition: transform 0.4s ease, box-shadow 0.4s ease;
                border-left: 5px solid #00c4cc;
            }
            .project-card:hover {
                transform: translateY(-6px);
                box-shadow: 0 12px 24px rgba(0, 196, 204, 0.15);
            }
            .project-card h4 {
                color: #ff6b81;
                margin-bottom: 20px;
                font-size: 1.4rem;
            }
            .project-card p {
                color: #b3b3c7;
                font-size: 1rem;
                margin-bottom: 15px;
            }
            .project-card .link-btn {
                color: #00c4cc;
                text-decoration: none;
                font-weight: 600;
                font-size: 1rem;
                transition: color 0.4s ease;
            }
            .project-card .link-btn:hover {
                color: #ff6b81;
            }

            .video-wrapper {
                position: relative;
                padding-bottom: 56.25%;
                border-radius: 12px;
                overflow: hidden;
                background: #2a2a4a;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }
            .video-wrapper iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: none;
            }

            .btn-back {
                position: sticky;
                bottom: 25px;
                left: 25px;
                background: linear-gradient(135deg, #ff6b81 0%, #ff8c94 100%);
                border: none;
                padding: 14px 30px;
                border-radius: 30px;
                font-weight: 600;
                color: #ffffff;
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                transition: all 0.4s ease;
                box-shadow: 0 6px 18px rgba(255, 107, 129, 0.3);
                z-index: 10;
            }
            .btn-back:hover {
                background: linear-gradient(135deg, #e63946 0%, #ff4d5a 100%);
                transform: scale(1.06);
                box-shadow: 0 8px 24px rgba(255, 107, 129, 0.4);
            }
            .btn-back i {
                margin-right: 10px;
                font-size: 1.2rem;
            }

            .loading-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                color: #00c4cc;
                font-size: 1.6rem;
                font-weight: 500;
            }
            .error-overlay {
                text-align: center;
                padding: 50px;
                background: #2a2a4a;
                border-radius: 15px;
                margin: 30px auto;
                max-width: 500px;
                color: #ff6b81;
                box-shadow: 0 6px 18px rgba(255, 107, 129, 0.2);
            }
            .error-overlay button {
                background: #ff6b81;
                border: none;
                padding: 12px 25px;
                border-radius: 25px;
                color: #fff;
                font-weight: 600;
                margin-top: 20px;
                transition: background 0.4s ease;
            }
            .error-overlay button:hover {
                background: #e63946;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(25px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @media (max-width: 768px) {
                .project-hero .title {
                    font-size: 2.2rem;
                }
                .project-content {
                    padding: 60px 0;
                }
                .image-gallery img {
                    width: 220px;
                    height: 160px;
                    margin-right: 10px;
                }
                .project-card {
                    padding: 20px;
                }
                .btn-back {
                    position: static;
                    margin-top: 25px;
                    width: 100%;
                    justify-content: center;
                    font-size: 1rem;
                    padding: 12px 25px;
                }
            }
        </style>
    </head>
    <body>
        <div id="page" class="main">
            <!-- Include Header -->
            <div id="header-container"></div>

            <div class="site-content" x-data="projectDetail">
                <!-- Hero Section -->

                <!-- Main Project Section -->
                <section class="project-content">
                    <div class="container">
                        <!-- Loading State -->
                        <div class="loading-overlay" x-show="isLoading">
                            <i class="fas fa-spinner fa-spin"></i> Loading
                            Project...
                        </div>

                        <!-- Error State -->
                        <div class="error-overlay" x-show="errorMessage">
                            <p x-text="errorMessage"></p>
                            <button @click="fetchProjectData()">Retry</button>
                        </div>

                        <!-- Project Content -->
                        <div x-show="!isLoading && !errorMessage">
                            <!-- Image Gallery (First Section) -->
                            <div
                                class="image-gallery"
                                x-show="projectData.images && projectData.images.length > 0"
                            >
                                <template
                                    x-for="image in projectData.images"
                                    :key="image.image_path"
                                >
                                    <img
                                        :src="image.image_path || 'assets/images/placeholder.jpg'"
                                        class="img-fluid"
                                        :alt="projectData.title || 'Project Image'"
                                        @error="handleImageError($event)"
                                    />
                                </template>
                            </div>
                            <p
                                x-show="!projectData.images || projectData.images.length === 0"
                                class="text-warning text-center mb-5"
                            >
                                No images available for this project.
                            </p>

                            <div class="row g-4">
                                <!-- Project Overview -->
                                <div class="col-md-6">
                                    <div class="project-card">
                                        <h4>Project Overview</h4>
                                        <p
                                            x-text="projectData.description || 'No description available'"
                                        ></p>
                                        <template
                                            x-if="projectData.project_url"
                                        >
                                            <a
                                                :href="projectData.project_url"
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                class="link-btn"
                                            >
                                                Visit Project
                                                <i
                                                    class="fas fa-external-link-alt"
                                                ></i>
                                            </a>
                                        </template>
                                    </div>
                                    <div
                                        class="project-card"
                                        x-show="isValidVideoUrl(projectData.video_url)"
                                    >
                                        <h4>Video Presentation</h4>
                                        <div class="video-wrapper">
                                            <iframe
                                                :src="getVideoEmbedUrl(projectData.video_url)"
                                                frameborder="0"
                                                allow="autoplay; encrypted-media"
                                                allowfullscreen
                                                title="Project Video"
                                            ></iframe>
                                        </div>
                                    </div>
                                </div>

                                <!-- Project Details -->
                                <div class="col-md-6">
                                    <div class="project-card">
                                        <h4>Project Details</h4>
                                        <p>
                                            <strong>Title:</strong>
                                            <span
                                                x-text="projectData.title || 'N/A'"
                                            ></span>
                                        </p>
                                        <p>
                                            <strong>Service:</strong>
                                            <span
                                                x-text="projectData.service?.title || 'N/A'"
                                            ></span>
                                        </p>
                                        <p>
                                            <strong>Description:</strong>
                                            <span
                                                x-text="projectData.service?.description || 'N/A'"
                                            ></span>
                                        </p>
                                        <div
                                            x-show="projectData.service?.image_path"
                                        >
                                            <img
                                                :src="projectData.service?.image_path || 'assets/images/placeholder.jpg'"
                                                class="img-fluid"
                                                :alt="projectData.service?.title || 'Service Image'"
                                                @error="handleImageError($event)"
                                                style="
                                                    border-radius: 12px;
                                                    max-height: 200px;
                                                    object-fit: cover;
                                                "
                                            />
                                        </div>
                                        <p
                                            x-show="!projectData.service?.image_path"
                                            class="text-warning"
                                        >
                                            No service image available
                                        </p>
                                    </div>
                                    <div class="project-card">
                                        <h4>Key Features</h4>
                                        <ul class="list-unstyled">
                                            <template
                                                x-for="feature in projectData.features"
                                                :key="feature.feature_text"
                                            >
                                                <li
                                                    x-text="feature.feature_text || 'N/A'"
                                                    class="mb-3"
                                                ></li>
                                            </template>
                                            <li
                                                x-show="!projectData.features || projectData.features.length === 0"
                                                class="mb-3"
                                            >
                                                No features available
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <a
                                href="page2.html"
                                class="btn btn-back"
                                role="button"
                                aria-label="Return to Projects"
                            >
                                <i class="fas fa-arrow-left"></i> Return to
                                Projects
                            </a>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Include Footer -->
            <div id="footer-container"></div>
        </div>

        <!-- JavaScript Libraries -->
        <script src="https://unpkg.com/i18next/dist/umd/i18next.min.js"></script>
        <script src="https://unpkg.com/i18next-browser-languagedetector/i18nextBrowserLanguageDetector.js"></script>
        <script src="https://unpkg.com/i18next-http-backend/i18nextHttpBackend.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <!-- JavaScript Files -->
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/jquery.appear.js"></script>
        <script src="assets/js/jquery.countTo.js"></script>
        <script src="assets/js/jquery.magnific-popup.js"></script>
        <script src="assets/js/owl.carousel.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/shuffle.min.js"></script>
        <script src="assets/js/swiper.min.js"></script>
        <script src="assets/js/SwiperAnimation.min.js"></script>
        <script src="assets/js/translations.js"></script>
        <script src="assets/js/config.js"></script>

        <!-- Project Detail Script -->
        <script>
            document.addEventListener("alpine:init", () => {
                Alpine.data("projectDetail", () => ({
                    projectData: {},
                    isLoading: true,
                    errorMessage: "",
                    apiBaseUrl:
                        typeof API_CONFIG !== "undefined" &&
                        API_CONFIG.BASE_URL_Renter
                            ? API_CONFIG.BASE_URL_Renter
                            : "http://127.0.0.1:8000",

                    async init() {
                        await this.$nextTick();
                        this.fetchProjectData();
                    },

                    async fetchProjectData() {
                        try {
                            this.isLoading = true;
                            this.errorMessage = "";
                            const urlParams = new URLSearchParams(
                                window.location.search
                            );
                            const projectId = urlParams.get("id");
                            if (!projectId) {
                                this.errorMessage = "Project ID is missing";
                                this.isLoading = false;
                                this.showToast(
                                    "danger",
                                    "Project ID is missing"
                                );
                                return;
                            }

                            const token =
                                localStorage.getItem("authToken") ||
                                "your-test-token";
                            if (!token) {
                                this.errorMessage =
                                    "Authentication token missing";
                                this.isLoading = false;
                                this.showToast(
                                    "danger",
                                    "Authentication token missing"
                                );
                                return;
                            }

                            const response = await fetch(
                                `${this.apiBaseUrl}/api/projects/show/${projectId}`,
                                {
                                    method: "GET",
                                    headers: {
                                        Accept: "application/json",
                                        Authorization: `Bearer ${token}`,
                                    },
                                }
                            );

                            if (!response.ok) {
                                throw new Error(
                                    `HTTP error! status: ${response.status}`
                                );
                            }

                            const data = await response.json();
                            if (data.status === "success" && data.data) {
                                this.projectData = data.data;

                                this.isLoading = false;
                            } else {
                                throw new Error(
                                    data.message || "Invalid response format"
                                );
                            }
                        } catch (error) {
                            this.errorMessage =
                                error.message ||
                                "Failed to fetch project details";
                            this.isLoading = false;
                            this.showToast("danger", this.errorMessage);
                            console.error("Fetch Error:", error);
                        }
                    },

                    isValidVideoUrl(url) {
                        if (!url) return false;
                        const youtubeRegex =
                            /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
                        const vimeoRegex =
                            /(?:vimeo\.com\/|player\.vimeo\.com\/video\/)(\d+)/;
                        return youtubeRegex.test(url) || vimeoRegex.test(url);
                    },

                    getVideoEmbedUrl(url) {
                        if (!url) return "";
                        const youtubeRegex =
                            /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
                        const vimeoRegex =
                            /(?:vimeo\.com\/|player\.vimeo\.com\/video\/)(\d+)/;
                        if (youtubeRegex.test(url)) {
                            const match = url.match(youtubeRegex);
                            return `https://www.youtube.com/embed/${match[1]}`;
                        } else if (vimeoRegex.test(url)) {
                            const match = url.match(vimeoRegex);
                            return `https://player.vimeo.com/video/${match[1]}`;
                        }
                        return "";
                    },

                    handleImageError(event) {
                        console.error(
                            "Image load failed:",
                            event.target.src,
                            "Switching to placeholder"
                        );
                        event.target.src = "assets/images/placeholder.jpg";
                    },

                    showToast(color, message) {
                        if (typeof Swal !== "undefined") {
                            const toast = Swal.mixin({
                                toast: true,
                                position: "bottom-start",
                                icon: color === "success" ? "success" : "error",
                                title: message,
                                showConfirmButton: false,
                                timer: 3000,
                                showCloseButton: true,
                                customClass: { popup: `color-${color}` },
                            });
                            toast.fire();
                        }
                    },
                }));
            });
        </script>

        <!-- Component Loader -->
        <script>
            $(document).ready(function () {
                let loadedComponents = 0;
                const totalComponents = 2;

                function checkAllLoaded(componentName) {
                    loadedComponents++;

                }

                function handleLoadError(componentName, xhr, status, error) {
                    console.error(
                        `Error loading ${componentName}.html: ${status} (${xhr.status}) - ${error}`
                    );

                    checkAllLoaded(componentName);
                }

                $("#header-container").load(
                    "assets/components/Header.html",
                    function (response, status, xhr) {
                        if (status === "error")
                            handleLoadError(
                                "Header",
                                xhr,
                                status,
                                xhr.statusText
                            );
                        else checkAllLoaded("Header");
                    }
                );

                $("#footer-container").load(
                    "assets/components/Footer.html",
                    function (response, status, xhr) {
                        if (status === "error")
                            handleLoadError(
                                "Footer",
                                xhr,
                                status,
                                xhr.statusText
                            );
                        else checkAllLoaded("Footer");
                    }
                );
            });
        </script>
    </body>
</html>
