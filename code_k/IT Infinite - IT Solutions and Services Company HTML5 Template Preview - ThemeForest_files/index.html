<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
        />

        <title>HexaTerminal | Software & Web Development Company</title>

        <!-- Meta Tags -->
        <meta
            name="description"
            content="HexaTerminal is a professional software development company..."
        />
        <meta
            name="description:ar"
            content="هيكسا تيرمينال هي شركة برمجيات احترافية..."
        />
        <meta
            name="keywords"
            content="HexaTerminal, Software Development, Web Development..."
        />
        <meta name="author" content="HexaTerminal Team" />

        <!-- Open Graph -->
        <meta
            property="og:title"
            content="HexaTerminal | Software Development Company"
        />
        <meta
            property="og:description"
            content="Innovative software development and digital solutions..."
        />
        <meta
            property="og:image"
            content="https://hexa-terminal.com/assets/images/og-image.jpg"
        />
        <meta property="og:url" content="https://hexa-terminal.com" />
        <meta property="og:type" content="website" />

        <!-- Preload Critical Resources -->
        <link
            rel="preload"
            href="assets/libs/css/font-awesome.min.css"
            as="style"
        />
        <link rel="preload" href="assets/libs/css/cairo-font.css" as="style" />
        <link rel="preload" href="assets/style/bootstrap.min.css" as="style" />
        <link rel="preload" href="assets/style/style.css" as="style" />

        <!-- CSS Files -->
        <link href="assets/libs/css/font-awesome.min.css" rel="stylesheet" />
        <link href="assets/libs/css/cairo-font.css" rel="stylesheet" />
        <link href="assets/style/bootstrap.min.css" rel="stylesheet" />
        <link href="assets/style/all.min.css" rel="stylesheet" />
        <link href="assets/style/css2.css" rel="stylesheet" />
        <link href="assets/style/magnific-popup.css" rel="stylesheet" />
        <link href="assets/style/owl.carousel.min.css" rel="stylesheet" />
        <link href="assets/style/swiper.min.css" rel="stylesheet" />
        <link href="assets/style/style.css" rel="stylesheet" />
        <link href="assets/libs/css/sweetalert2.min.css" rel="stylesheet" />

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <style>
            /* شاشة التحميل */
            #loading-screen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #fff;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                transition: opacity 0.5s ease;
            }

            .loading-logo {
                font-size: 2.5rem;
                font-weight: bold;
                margin-bottom: 20px;
                color: #333;
            }

            .loading-spinner {
                width: 50px;
                height: 50px;
                border: 5px solid #f3f3f3;
                border-top: 5px solid #3498db;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-bottom: 20px;
            }

            .loading-text {
                font-size: 1rem;
                color: #666;
                text-align: center;
            }

            .loading-progress {
                width: 200px;
                height: 4px;
                background-color: #f0f0f0;
                border-radius: 2px;
                margin-top: 10px;
                overflow: hidden;
            }

            .loading-progress-bar {
                height: 100%;
                background-color: #3498db;
                width: 0%;
                transition: width 0.3s ease;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            #page {
                opacity: 0;
                transition: opacity 0.5s ease;
            }
            #page.loaded {
                opacity: 1;
            }

            .error-message {
                background-color: #f8d7da;
                color: #721c24;
                padding: 15px;
                border-radius: 5px;
                margin: 10px 0;
                text-align: center;
                border: 1px solid #f5c6cb;
            }

            .retry-button {
                background-color: #007bff;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                margin-top: 10px;
            }
        </style>
    </head>

    <body>
        <!-- شاشة التحميل -->
        <div id="loading-screen">
            <div class="loading-logo">HexaTerminal</div>
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-status">
                جاري تحميل المحتوى...
            </div>
            <div class="loading-progress">
                <div
                    class="loading-progress-bar"
                    id="loading-progress-bar"
                ></div>
            </div>
        </div>

        <!-- المحتوى الرئيسي -->
        <div id="page" class="main">
            <!-- Include Header -->
            <div id="header-container"></div>

            <div class="site-content">
                <div class="container-fluid">
                    <div class="item-efftect">
                        <div class="efftect overflow-hidden"></div>
                        <div class="efftect overflow-hidden"></div>
                        <div class="efftect overflow-hidden"></div>
                        <div class="efftect overflow-hidden"></div>
                        <div class="efftect overflow-hidden"></div>
                    </div>
                </div>

                <!-- Include Components -->
                <div id="banner-container"></div>
                <div id="services-hero-container"></div>
                <div id="services-list-container"></div>
                <div id="projects-showcase-container"></div>
                <div id="team-section-container"></div>
                <!-- <div id="advantages-section-container"></div> -->
                <div id="reviews-section-container"></div>
                <div id="faq-container"></div>
                <div id="vision-container"></div>
            </div>

            <!-- Include Footer -->
            <div id="footer-container"></div>
        </div>

        <!-- JavaScript Libraries (محلي) -->
        <script src="assets/libs/js/i18next.min.js"></script>
        <script src="assets/libs/js/i18next-browser-languagedetector.min.js"></script>
        <script src="assets/libs/js/i18next-http-backend.min.js"></script>
        <script src="assets/js/jquery-3.7.1.min.js"></script>
        <script src="assets/libs/js/alpinejs.min.js" defer></script>
        <script src="assets/libs/js/sweetalert2.min.js"></script>
        <script src="assets/libs/js/lenis.min.js"></script>

        <!-- JavaScript Files -->
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/jquery.appear.js"></script>
        <script src="assets/js/jquery.countTo.js"></script>
        <script src="assets/js/jquery.magnific-popup.js"></script>
        <script src="assets/js/owl.carousel.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/shuffle.min.js"></script>
        <script src="assets/js/swiper.min.js"></script>
        <script src="assets/js/SwiperAnimation.min.js"></script>
        <script src="assets/js/translations.js"></script>

        <!-- Component Scripts -->
        <script src="assets/components/Services/ServicesList.js"></script>
        <script src="assets/components/Services/ProjectsShowcase.js"></script>
        <script src="assets/components/Services/TeamSection.js"></script>
        <script src="assets/components/Services/FAQSection.js"></script>
        <script src="assets/components/Services/ReviewsSection.js"></script>
        <script src="assets/components/VideoSection.js"></script>
        <script src="assets/components/header.js"></script>

        <script>
            // تهيئة التحميل
            const componentState = {
                loaded: 0,
                total: 11,
                errors: 0,
                maxRetries: 2,
                retryDelays: [1000, 3000],
            };

            function updateProgress() {
                const progress =
                    (componentState.loaded / componentState.total) * 100;
                document.getElementById("loading-progress-bar").style.width =
                    progress + "%";

                const statusText =
                    componentState.errors > 0
                        ? `جاري تحميل المحتوى... (${componentState.errors} أخطاء)`
                        : `جاري تحميل المحتوى...`;
                document.getElementById("loading-status").textContent =
                    statusText;
            }

            function showPage() {
                if (
                    componentState.loaded + componentState.errors >=
                    componentState.total
                ) {
                    setTimeout(() => {
                        document.getElementById(
                            "loading-screen"
                        ).style.opacity = "0";
                        document.getElementById("page").classList.add("loaded");

                        setTimeout(() => {
                            document.getElementById(
                                "loading-screen"
                            ).style.display = "none";

                            // تهيئة Lenis
                            const lenis = new Lenis({
                                duration: 1.2,
                                easing: (t) =>
                                    Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                                smooth: true,
                            });

                            function raf(time) {
                                lenis.raf(time);
                                requestAnimationFrame(raf);
                            }
                            requestAnimationFrame(raf);
                        }, 500);
                    }, 500);
                }
            }

            function loadComponent(containerId, url, retryCount = 0) {
                return new Promise((resolve, reject) => {
                    $(containerId).load(url, function (response, status, xhr) {
                        if (status === "error") {
                            if (retryCount < componentState.maxRetries) {
                                const delay =
                                    componentState.retryDelays[retryCount];
                                document.getElementById(
                                    "loading-status"
                                ).textContent = `خطأ في تحميل ${url}. إعادة المحاولة بعد ${
                                    delay / 1000
                                } ثواني...`;

                                setTimeout(() => {
                                    loadComponent(
                                        containerId,
                                        url,
                                        retryCount + 1
                                    )
                                        .then(resolve)
                                        .catch(reject);
                                }, delay);
                            } else {
                                componentState.errors++;
                                $(containerId).html(`
                                    <div class="error-message">
                                        <p>تعذر تحميل هذا القسم.</p>
                                        <button class="retry-button" onclick="retryComponent('${containerId}', '${url}')">
                                            إعادة المحاولة
                                        </button>
                                    </div>
                                `);
                                updateProgress();
                                resolve();
                            }
                        } else {
                            componentState.loaded++;
                            updateProgress();
                            resolve();
                        }
                    });
                });
            }

            function retryComponent(containerId, url) {
                $(containerId).html(
                    '<div class="text-center">جاري إعادة التحميل...</div>'
                );
                componentState.errors--;
                loadComponent(containerId, url).then(showPage);
            }

            // تحميل المكونات
            $(document).ready(async function () {
                try {
                    const components = [
                        {
                            id: "#header-container",
                            url: "assets/components/Header.html",
                        },
                        {
                            id: "#banner-container",
                            url: "assets/components/Banner.html",
                        },
                        {
                            id: "#vision-container",
                            url: "assets/components/Vision.html",
                        },
                        {
                            id: "#services-hero-container",
                            url: "assets/components/Services/ServicesHero.html",
                        },
                        {
                            id: "#services-list-container",
                            url: "assets/components/Services/ServicesList.html",
                        },
                        {
                            id: "#projects-showcase-container",
                            url: "assets/components/Services/ProjectsShowcase.html",
                        },
                        {
                            id: "#team-section-container",
                            url: "assets/components/Services/TeamSection.html",
                        },
                  
                        {
                            id: "#reviews-section-container",
                            url: "assets/components/Services/ReviewsSection.html",
                        },
                        {
                            id: "#faq-container",
                            url: "assets/components/Services/FAQSection.html",
                        },
                        {
                            id: "#footer-container",
                            url: "assets/components/Footer.html",
                        },
                    ];

                    componentState.total = components.length;
                    const loadPromises = components.map((comp) =>
                        loadComponent(comp.id, comp.url)
                    );
                    await Promise.allSettled(loadPromises);
                    showPage();
                } catch (error) {
                    console.error("خطأ أثناء تحميل المكونات:", error);
                    document.getElementById("loading-status").textContent =
                        "حدث خطأ غير متوقع. جاري تحميل الصفحة...";
                    showPage();
                }
            });
        </script>

        <script>
            // جلب بيانات الشركة
            document.addEventListener("DOMContentLoaded", async () => {
                try {
                    const response = await fetch(
                        "http://62.84.188.239/api/about_us/index"
                    );
                    const result = await response.json();

                    if (result.status === "success" && result.data) {
                        const data = result.data;

                        // تحديث بيانات الشركة
                        const footerLogo =
                            document.querySelector(".footer-logo");
                        if (footerLogo)
                            footerLogo.textContent =
                                data.company_name || "Company";

                        const emailElement = document.querySelector(
                            '[data-i18n="footer.address.email"]'
                        );
                        if (emailElement)
                            emailElement.textContent = data.contact_email || "";

                        // تحديث روابط التواصل الاجتماعي
                        const socialLinks = {
                            ".fa-facebook-f": data.facebook_url,
                            ".fa-instagram": data.instagram_url,
                            ".fa-linkedin-in": data.linkedin_url,
                            ".fa-twitter": data.github_url,
                        };

                        Object.entries(socialLinks).forEach(
                            ([selector, url]) => {
                                const element =
                                    document.querySelector(
                                        selector
                                    )?.parentElement;
                                if (element && url) element.href = url;
                            }
                        );
                    }
                } catch (error) {
                    console.error("خطأ أثناء جلب بيانات الشركة:", error);
                }
            });
        </script>
    </body>
</html>
